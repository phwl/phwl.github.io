<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2021-05-28T17:46:12+10:00</updated><id>/feed.xml</id><title type="html">Life, the Universe and Fishing</title><subtitle>Random things.</subtitle><author><name>phwl</name></author><entry><title type="html">Flathead Ubuntu GPU Machine Install</title><link href="/2021/flathead-configuration/" rel="alternate" type="text/html" title="Flathead Ubuntu GPU Machine Install" /><published>2021-05-27T14:54:42+10:00</published><updated>2021-05-27T14:54:42+10:00</updated><id>/2021/flathead-configuration</id><content type="html" xml:base="/2021/flathead-configuration/">&lt;p&gt;This is how a new machine, flathead, was configured.&lt;/p&gt;

&lt;h2 id=&quot;machine&quot;&gt;Machine&lt;/h2&gt;
&lt;p&gt;The machine was purchased from &lt;a href=&quot;http://mwave.com.au&quot;&gt;Mwave&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Supermicro 7049GP-TRT 
Dual Intel Xeon Silver 4208
256GB ECC RDIMM 3200 Mhz
1TB  M.2 nvme SSD
1 x 4TB 7.2K HDD 
4 x Nvidia GeForce RTX3090 24GB OEM Graphics Cards
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;step-1-bios-boot-mode&quot;&gt;Step 1 BIOS Boot Mode&lt;/h2&gt;
&lt;p&gt;In the BIOS settings set boot mode to Legacy (the Ubuntu 20.04 USB doesn’t
boot in UEFI mode).&lt;/p&gt;

&lt;h2 id=&quot;step-2-install-ubuntu&quot;&gt;Step 2 Install Ubuntu&lt;/h2&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt purge nvidia-*
sudo apt autoremove
sudo ubuntu-drivers autoinstall
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then follow the &lt;a href=&quot;https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html&quot;&gt;Nvidia instructions&lt;/a&gt;
using the Package Manager method and deb(network) installer type. 
After adding the package, I installed the 11.1.1-1 version to be compatible
with pytorch.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get -y install cuda=11.1.1-1
sudo shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;step-2-install-anaconda&quot;&gt;Step 2 Install Anaconda&lt;/h2&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget https://repo.anaconda.com/archive/Anaconda3-2021.05-Linux-x86_64.sh
sh Anaconda3-2021.05-Linux-x86_64.sh
conda install pytorch cudatoolkit=11.1 -c pytorch -c nvidia
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems to work&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(base) phwl@flathead:~$ cat /proc/driver/nvidia/version 
NVRM version: NVIDIA UNIX x86_64 Kernel Module  460.73.01  Thu Apr  1 21:40:36 UTC 2021
GCC version:  
(base) phwl@flathead:~$ python
Python 3.8.8 (default, Apr 13 2021, 19:58:26) 
[GCC 7.3.0] :: Anaconda, Inc. on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&amp;gt;&amp;gt;&amp;gt; import torch
&amp;gt;&amp;gt;&amp;gt; list(map(torch.cuda.get_device_name, range(4)))
[&apos;GeForce RTX 3090&apos;, &apos;GeForce RTX 3090&apos;, &apos;GeForce RTX 3090&apos;, &apos;GeForce RTX 3090&apos;]
&amp;gt;&amp;gt;&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>phwl</name></author><category term="academia" /><category term="software" /><category term="ubuntu" /><summary type="html">This is how a new machine, flathead, was configured.</summary></entry><entry><title type="html">Anti-fouling Charlie’s boat</title><link href="/2021/antifoul-boat/" rel="alternate" type="text/html" title="Anti-fouling Charlie’s boat" /><published>2021-05-23T17:12:12+10:00</published><updated>2021-05-23T17:12:12+10:00</updated><id>/2021/antifoul-boat</id><content type="html" xml:base="/2021/antifoul-boat/">&lt;p&gt;My friend Charlie’s boat was at the dock for anti-fouling and I gave him a 
hand.&lt;/p&gt;

&lt;p&gt;Nice view of Sydney Harbour from Woolwich Dock.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/DSCF1023.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/DSCF1023.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/DSCF1025.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/DSCF1025.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Quite a few boats around here.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/DSCF1021.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/DSCF1021.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/DSCF1032.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/DSCF1032.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Here’s Charlie. He actually did most of the hard work the previous day so all we had to do was paint.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/DSCF1035.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/DSCF1035.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Before.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/DSCF1034.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/DSCF1034.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;After.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/IMG_7843.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/IMG_7843.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;</content><author><name>phwl</name></author><category term="diy" /><category term="repair" /><summary type="html">My friend Charlie’s boat was at the dock for anti-fouling and I gave him a hand.</summary></entry><entry><title type="html">MY16 Subaru Forester Cabin Air / Pollen Filter Replacement</title><link href="/2021/subaru-forster-cabinair-pollenfilter/" rel="alternate" type="text/html" title="MY16 Subaru Forester Cabin Air / Pollen Filter Replacement" /><published>2021-05-01T11:13:59+10:00</published><updated>2021-05-01T11:13:59+10:00</updated><id>/2021/subaru-forster-cabinair-pollenfilter</id><content type="html" xml:base="/2021/subaru-forster-cabinair-pollenfilter/">&lt;p&gt;Took our 2016 Forester to Subaru for a service. They called me
back asking if I wanted to pay $143 to 
replace the Cabin Air/Pollen filter.&lt;/p&gt;

&lt;p&gt;Here is the inspection report. I didn’t even know that cars had these but since they had to take it out to
inspect, one wouldn’t think they need to charge $100 labour to replace.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/cabinfilter.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/cabinfilter.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;The procedure takes about 5 min the first time (actually from the photo timestamp information it took 4 min and that’s counting the time spent taking the pictures). 
First you pull out the plastic arm that pulls up on the glovebox door.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/IMG_1892.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/IMG_1892.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Then you push the glovebox to the left to unhook the plastic hinge.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/IMG_1895.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/IMG_1895.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;The glovebox comes right out and the cabin filter is on the bottom, marked “push”.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/IMG_1896.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/IMG_1896.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Push the tabs towards each other and slide it out.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/IMG_1897.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/IMG_1897.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Actually, the filter was not too dirty for 5 years but since I had it out, replaced it with one from Repco which was $40.85 (with NRMA discount).&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/05/IMG_1898.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/05/IMG_1898.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;</content><author><name>phwl</name></author><category term="diy" /><category term="repair" /><summary type="html">Took our 2016 Forester to Subaru for a service. They called me back asking if I wanted to pay $143 to replace the Cabin Air/Pollen filter.</summary></entry><entry><title type="html">Audio configuration under Debian QEMU</title><link href="/2021/qemu-debian-audio/" rel="alternate" type="text/html" title="Audio configuration under Debian QEMU" /><published>2021-04-06T09:00:00+10:00</published><updated>2021-04-06T09:00:00+10:00</updated><id>/2021/qemu-debian-audio</id><content type="html" xml:base="/2021/qemu-debian-audio/">&lt;p&gt;This post describes how to use audio on aarch64 ARM under
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu&lt;/code&gt; Debian Linux. It follows from &lt;a href=&quot;/2021/qemu-armhf-debian/&quot;&gt;Debian on ARM via QEMU&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Start by booting QEMU.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-system-aarch64 &lt;span class=&quot;nt&quot;&gt;-M&lt;/span&gt; virt &lt;span class=&quot;nt&quot;&gt;-cpu&lt;/span&gt; cortex-a53 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 1G &lt;span class=&quot;nt&quot;&gt;-initrd&lt;/span&gt; initrd.img-4.19.0-16-arm64 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-kernel&lt;/span&gt; vmlinuz-4.19.0-16-arm64 &lt;span class=&quot;nt&quot;&gt;-append&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root=/dev/vda2 console=ttyAMA0&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-drive&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;virtio,file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;debian-3607-aarch64.qcow2,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;qcow2,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;hd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; user,hostfwd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;tcp::10022-:22 &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; nic &lt;span class=&quot;nt&quot;&gt;-nographic&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; intel-hda &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; hda-duplex&amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Rather than login directly, 
I prefer to ssh to the QEMU machine so I can run Xwindows.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh &lt;span class=&quot;nt&quot;&gt;-Y&lt;/span&gt; elec3607@localhost &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 10022
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can also copy files to it.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scp &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; 10022 &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; lab5-audio elec3607@localhost:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install the alsa and pulseaudio.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;libasound2 libasound2-plugins libasound2-doc alsa-utils pulseaudio pavucontrol paprefs libpulse-dev libcanberra-gtk-dev 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;usermod &lt;span class=&quot;nt&quot;&gt;-aG&lt;/span&gt; audio,pulse,pulse-access elec3607
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then you have to log out and log in again.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;aplay &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;****&lt;/span&gt; List of PLAYBACK Hardware Devices &lt;span class=&quot;k&quot;&gt;****&lt;/span&gt;
card 0: Intel &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;HDA Intel], device 0: Generic Analog &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Generic Analog]
  Subdevices: 1/1
  Subdevice &lt;span class=&quot;c&quot;&gt;#0: subdevice #0&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pulseaudio &lt;span class=&quot;nt&quot;&gt;--start&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pactl info
Server String: /run/user/1000/pulse/native
Library Protocol Version: 32
Server Protocol Version: 32
Is Local: &lt;span class=&quot;nb&quot;&gt;yes
&lt;/span&gt;Client Index: 2
Tile Size: 65472
User Name: elec3607
Host Name: debian
Server Name: pulseaudio
Server Version: 12.2
Default Sample Specification: s16le 2ch 44100Hz
Default Channel Map: front-left,front-right
Default Sink: alsa_output.platform-4010000000.pcie-pci-0000_00_02.0.analog-stereo
Default Source: alsa_input.platform-4010000000.pcie-pci-0000_00_02.0.analog-stereo
Cookie: 1295:3f1d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then you can start it up via systemctl.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nt&quot;&gt;--user&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;pulseaudio
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nt&quot;&gt;--user&lt;/span&gt; start pulseaudio
Job &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;pulseaudio.service failed because the control process exited with error code.
See &lt;span class=&quot;s2&quot;&gt;&quot;systemctl --user status pulseaudio.service&quot;&lt;/span&gt; and &lt;span class=&quot;s2&quot;&gt;&quot;journalctl --user -xe&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;details.
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;shutdown &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Wait for everything to come back up and login again via ssh&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl --user status pulseaudio
● pulseaudio.service - Sound Service
   Loaded: loaded (/usr/lib/systemd/user/pulseaudio.service; enabled; vendor pre
   Active: active (running) since Sat 2021-04-10 15:59:48 AEST; 4s ago
 Main PID: 336 (pulseaudio)
   CGroup: /user.slice/user-1000.slice/user@1000.service/pulseaudio.service
           ├─336 /usr/bin/pulseaudio --daemonize=no
           └─357 /usr/lib/aarch64-linux-gnu/pulse/gsettings-helper
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now edit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/pulse/default.pa&lt;/code&gt; and append the line:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;load-module module-null-sink sink_name=MySink format=s16le channels=1 rate=12000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can restart the daemon and configure with.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl --user restart pulseaudio
$ pacmd list-sinks
2 sink(s) available.
  * index: 0
	name: &amp;lt;alsa_output.platform-4010000000.pcie-pci-0000_00_02.0.analog-stereo&amp;gt;
	driver: &amp;lt;module-alsa-card.c&amp;gt;
	flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL DECIBEL_VOLUME LATENCY FLAT_VOLUME DYNAMIC_LATENCY
	state: IDLE
	suspend cause: (none)
	priority: 9039
	volume: front-left: 30419 /  46% / -20.00 dB,   front-right: 30419 /  46% / -20.00 dB
	        balance 0.00
	base volume: 65536 / 100% / 0.00 dB
	volume steps: 65537
	muted: no
	current latency: 1283.09 ms
	max request: 344 KiB
	max rewind: 344 KiB
	monitor source: 0
	sample spec: s16le 2ch 44100Hz
	channel map: front-left,front-right
	             Stereo
	used by: 0
	linked by: 0
	configured latency: 2000.00 ms; range is 0.50 .. 2000.00 ms
	card: 0 &amp;lt;alsa_card.platform-4010000000.pcie-pci-0000_00_02.0&amp;gt;
	module: 6
	properties:
		alsa.resolution_bits = &quot;16&quot;
		device.api = &quot;alsa&quot;
		device.class = &quot;sound&quot;
		alsa.class = &quot;generic&quot;
		alsa.subclass = &quot;generic-mix&quot;
		alsa.name = &quot;Generic Analog&quot;
		alsa.id = &quot;Generic Analog&quot;
		alsa.subdevice = &quot;0&quot;
		alsa.subdevice_name = &quot;subdevice #0&quot;
		alsa.device = &quot;0&quot;
		alsa.card = &quot;0&quot;
		alsa.card_name = &quot;HDA Intel&quot;
		alsa.long_card_name = &quot;HDA Intel at 0x10040000 irq 50&quot;
		alsa.driver_name = &quot;snd_hda_intel&quot;
		device.bus_path = &quot;platform-4010000000.pcie-pci-0000:00:02.0&quot;
		sysfs.path = &quot;/devices/platform/4010000000.pcie/pci0000:00/0000:00:02.0/sound/card0&quot;
		device.bus = &quot;pci&quot;
		device.vendor.id = &quot;8086&quot;
		device.vendor.name = &quot;Intel Corporation&quot;
		device.product.id = &quot;2668&quot;
		device.product.name = &quot;82801FB/FBM/FR/FW/FRW (ICH6 Family) High Definition Audio Controller (QEMU Virtual Machine)&quot;
		device.form_factor = &quot;internal&quot;
		device.string = &quot;front:0&quot;
		device.buffering.buffer_size = &quot;352800&quot;
		device.buffering.fragment_size = &quot;176400&quot;
		device.access_mode = &quot;mmap+timer&quot;
		device.profile.name = &quot;analog-stereo&quot;
		device.profile.description = &quot;Analog Stereo&quot;
		device.description = &quot;Built-in Audio Analog Stereo&quot;
		alsa.mixer_name = &quot;QEMU Generic&quot;
		alsa.components = &quot;HDA:1af40022,1af40022,00100101&quot;
		module-udev-detect.discovered = &quot;1&quot;
		device.icon_name = &quot;audio-card-pci&quot;
	ports:
		analog-output-lineout: Line Out (priority 9900, latency offset 0 usec, available: unknown)
			properties:
				
	active port: &amp;lt;analog-output-lineout&amp;gt;
    index: 1
	name: &amp;lt;MySink&amp;gt;
	driver: &amp;lt;module-null-sink.c&amp;gt;
	flags: DECIBEL_VOLUME LATENCY FLAT_VOLUME DYNAMIC_LATENCY
	state: IDLE
	suspend cause: (none)
	priority: 1000
	volume: mono: 65536 / 100% / 0.00 dB
	        balance 0.00
	base volume: 65536 / 100% / 0.00 dB
	volume steps: 65537
	muted: no
	current latency: 1576.69 ms
	max request: 46 KiB
	max rewind: 46 KiB
	monitor source: 2
	sample spec: s16le 1ch 12000Hz
	channel map: mono
	             Mono
	used by: 0
	linked by: 0
	configured latency: 2000.00 ms; range is 0.50 .. 2000.00 ms
	module: 20
	properties:
		device.description = &quot;Null Output&quot;
		device.class = &quot;abstract&quot;
		device.icon_name = &quot;audio-card&quot;
$ pacmd list-sources
3 source(s) available.
    index: 0
	name: &amp;lt;alsa_output.platform-4010000000.pcie-pci-0000_00_02.0.analog-stereo.monitor&amp;gt;
	driver: &amp;lt;module-alsa-card.c&amp;gt;
	flags: DECIBEL_VOLUME LATENCY DYNAMIC_LATENCY
	state: SUSPENDED
	suspend cause: IDLE
	priority: 1030
	volume: front-left: 65536 / 100% / 0.00 dB,   front-right: 65536 / 100% / 0.00 dB
	        balance 0.00
	base volume: 65536 / 100% / 0.00 dB
	volume steps: 65537
	muted: no
	current latency: 0.00 ms
	max rewind: 0 KiB
	sample spec: s16le 2ch 44100Hz
	channel map: front-left,front-right
	             Stereo
	used by: 0
	linked by: 0
	configured latency: 0.00 ms; range is 0.50 .. 2000.00 ms
	monitor_of: 0
	card: 0 &amp;lt;alsa_card.platform-4010000000.pcie-pci-0000_00_02.0&amp;gt;
	module: 6
	properties:
		device.description = &quot;Monitor of Built-in Audio Analog Stereo&quot;
		device.class = &quot;monitor&quot;
		alsa.card = &quot;0&quot;
		alsa.card_name = &quot;HDA Intel&quot;
		alsa.long_card_name = &quot;HDA Intel at 0x10040000 irq 50&quot;
		alsa.driver_name = &quot;snd_hda_intel&quot;
		device.bus_path = &quot;platform-4010000000.pcie-pci-0000:00:02.0&quot;
		sysfs.path = &quot;/devices/platform/4010000000.pcie/pci0000:00/0000:00:02.0/sound/card0&quot;
		device.bus = &quot;pci&quot;
		device.vendor.id = &quot;8086&quot;
		device.vendor.name = &quot;Intel Corporation&quot;
		device.product.id = &quot;2668&quot;
		device.product.name = &quot;82801FB/FBM/FR/FW/FRW (ICH6 Family) High Definition Audio Controller (QEMU Virtual Machine)&quot;
		device.form_factor = &quot;internal&quot;
		device.string = &quot;0&quot;
		module-udev-detect.discovered = &quot;1&quot;
		device.icon_name = &quot;audio-card-pci&quot;
  * index: 1
	name: &amp;lt;alsa_input.platform-4010000000.pcie-pci-0000_00_02.0.analog-stereo&amp;gt;
	driver: &amp;lt;module-alsa-card.c&amp;gt;
	flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL DECIBEL_VOLUME LATENCY DYNAMIC_LATENCY
	state: SUSPENDED
	suspend cause: IDLE
	priority: 9039
	volume: front-left: 65536 / 100% / 0.00 dB,   front-right: 65536 / 100% / 0.00 dB
	        balance 0.00
	base volume: 65536 / 100% / 0.00 dB
	volume steps: 65537
	muted: no
	current latency: 0.00 ms
	max rewind: 0 KiB
	sample spec: s16le 2ch 44100Hz
	channel map: front-left,front-right
	             Stereo
	used by: 0
	linked by: 0
	configured latency: 0.00 ms; range is 0.50 .. 2000.00 ms
	card: 0 &amp;lt;alsa_card.platform-4010000000.pcie-pci-0000_00_02.0&amp;gt;
	module: 6
	properties:
		alsa.resolution_bits = &quot;16&quot;
		device.api = &quot;alsa&quot;
		device.class = &quot;sound&quot;
		alsa.class = &quot;generic&quot;
		alsa.subclass = &quot;generic-mix&quot;
		alsa.name = &quot;Generic Analog&quot;
		alsa.id = &quot;Generic Analog&quot;
		alsa.subdevice = &quot;0&quot;
		alsa.subdevice_name = &quot;subdevice #0&quot;
		alsa.device = &quot;0&quot;
		alsa.card = &quot;0&quot;
		alsa.card_name = &quot;HDA Intel&quot;
		alsa.long_card_name = &quot;HDA Intel at 0x10040000 irq 50&quot;
		alsa.driver_name = &quot;snd_hda_intel&quot;
		device.bus_path = &quot;platform-4010000000.pcie-pci-0000:00:02.0&quot;
		sysfs.path = &quot;/devices/platform/4010000000.pcie/pci0000:00/0000:00:02.0/sound/card0&quot;
		device.bus = &quot;pci&quot;
		device.vendor.id = &quot;8086&quot;
		device.vendor.name = &quot;Intel Corporation&quot;
		device.product.id = &quot;2668&quot;
		device.product.name = &quot;82801FB/FBM/FR/FW/FRW (ICH6 Family) High Definition Audio Controller (QEMU Virtual Machine)&quot;
		device.form_factor = &quot;internal&quot;
		device.string = &quot;front:0&quot;
		device.buffering.buffer_size = &quot;352800&quot;
		device.buffering.fragment_size = &quot;176400&quot;
		device.access_mode = &quot;mmap+timer&quot;
		device.profile.name = &quot;analog-stereo&quot;
		device.profile.description = &quot;Analog Stereo&quot;
		device.description = &quot;Built-in Audio Analog Stereo&quot;
		alsa.mixer_name = &quot;QEMU Generic&quot;
		alsa.components = &quot;HDA:1af40022,1af40022,00100101&quot;
		module-udev-detect.discovered = &quot;1&quot;
		device.icon_name = &quot;audio-card-pci&quot;
	ports:
		analog-input-linein: Line In (priority 8100, latency offset 0 usec, available: unknown)
			properties:
				
	active port: &amp;lt;analog-input-linein&amp;gt;
    index: 2
	name: &amp;lt;MySink.monitor&amp;gt;
	driver: &amp;lt;module-null-sink.c&amp;gt;
	flags: DECIBEL_VOLUME LATENCY DYNAMIC_LATENCY
	state: SUSPENDED
	suspend cause: IDLE
	priority: 1000
	volume: mono: 65536 / 100% / 0.00 dB
	        balance 0.00
	base volume: 65536 / 100% / 0.00 dB
	volume steps: 65537
	muted: no
	current latency: 0.00 ms
	max rewind: 46 KiB
	sample spec: s16le 1ch 12000Hz
	channel map: mono
	             Mono
	used by: 0
	linked by: 0
	configured latency: 0.00 ms; range is 0.50 .. 2000.00 ms
	monitor_of: 1
	module: 20
	properties:
		device.description = &quot;Monitor of Null Output&quot;
		device.class = &quot;monitor&quot;
		device.icon_name = &quot;audio-input-microphone&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Volume Control program allows you to monitor what sources and sinks are available. If you play something and run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pavucontrol&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;paplay iq-16b.wav&amp;amp;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pavucontrol&amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;In the Configuration tab, select Off as the Built-in Audio profile&lt;/li&gt;
  &lt;li&gt;If you look at Input Devices and Show: All Input Devices, you should only see Monitor of Null Output and the meter should indicate something is playing.&lt;/li&gt;
  &lt;li&gt;If you look at Output Devices and Show: All Output Devices, you should only see Null Output and the meter should indicate something is playing.
`&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you play a file in the background, you can decode it.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;paplay data/iq-16b.wav &amp;amp;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wsprcan/k9an-wsprd 
Writing data/wf-1618037425.wav
mode  &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-3&lt;/span&gt;.1   0.001437 &lt;span class=&quot;nt&quot;&gt;-3&lt;/span&gt;  VK2RG QF56 30 
mode &lt;span class=&quot;nt&quot;&gt;-19&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt;.9   0.001455 &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt;  VK3GOD QF23 23 
mode &lt;span class=&quot;nt&quot;&gt;-21&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt;.9   0.001478 &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt;  VK4YEH QG62 37 
&amp;lt;DecodeFinished,data/wf-1618037425.wav,3&amp;gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;3]+  Done                    paplay data/iq-16b.wav
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Other useful tools include:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Firefox and audacity packages are useful but run too slow on QEMU.
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  sudo apt install firefox-esr audacity
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;PulseAudio Preferences can be used to configure the network.
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  $ paprefs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;ul&gt;
      &lt;li&gt;Under the Network Access tab, select “Make discoverable PulseAudio network sound devices available locally”&lt;/li&gt;
      &lt;li&gt;Under the Network Server tab, select “Enable network access to local sound devices” and “Don’t require authentication”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you go to a websdr in Firefox, you can route the audio to your machine.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;firefox http://websdr1.sdrutah.org:8901/index1a.html?tune&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;7038.6usb &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, this doesn’t run fast enough under QEMU to work on wspr decoding but it does under native x86 Linux.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://gavv.github.io/articles/pulseaudio-under-the-hood/&quot;&gt;https://gavv.github.io/articles/pulseaudio-under-the-hood/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/&quot;&gt;https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wiki.archlinux.org/index.php/PulseAudio/Examples#PulseAudio_over_network&quot;&gt;https://wiki.archlinux.org/index.php/PulseAudio/Examples#PulseAudio_over_network&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>phwl</name></author><category term="academia" /><category term="embedded" /><summary type="html">This post describes how to use audio on aarch64 ARM under qemu Debian Linux. It follows from Debian on ARM via QEMU</summary></entry><entry><title type="html">Hawkesbury River Rescue</title><link href="/2021/hawkesbury-river-rescue/" rel="alternate" type="text/html" title="Hawkesbury River Rescue" /><published>2021-04-03T18:00:33+11:00</published><updated>2021-04-03T18:00:33+11:00</updated><id>/2021/hawkesbury-river-rescue</id><content type="html" xml:base="/2021/hawkesbury-river-rescue/">&lt;p&gt;It started off as a rather routine Easter fishing day trip to Mooney Mooney with Warren.&lt;/p&gt;

&lt;p&gt;It was a very foggy morning, worse than I’ve ever seen it on the Hawkesbury.
Approaching Mooney Mooney, a road sign said that the boat ramp was closed so we made a detour to Brooklyn boat ramp. That put us about an hour behind.&lt;/p&gt;

&lt;p&gt;On one of the islands, we saw the odd scene of a really large tent and
a really small kayak. We chatted with the guy (whose name was Dong), and his wife Lin, for about 10 minutes before he casually requested that we rescue them as their inflatable boat disappeared in the middle of the night.&lt;/p&gt;

&lt;p&gt;Since the outboard was still at the campsite, we thought it was very unlikely it had
been stolen. They had just pulled it up high onto the shore. 
They had called 000 (the Aussie equivalent of 911) who weren’t interested in rescuing them. It was also
a shame that my VHF marine radio was out of service with a dead battery so I couldn’t
use it to call Marine Rescue.  We said we would go fishing and come back for them.
When he mentioned he was from Wollongong, I correctly guessed he worked at Wollongong University.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7681.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7681.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;The fishing was tough but we got a nice bream just as we were about to change spots.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7682.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7682.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;It became a nice day as the fog cleared. There were many logs and other debris
in the river due to the recent floods. The water was a dark brown colour.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7686.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7686.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;After fishing for a couple of hours, I called them and said we would be there in 20
min. During the call, I hooked a nice flathead but it bit through the leader within inches
of the boat. That’s the second consecutive flathead I’ve lost right at
the net.&lt;/p&gt;

&lt;p&gt;When we arrived, everything was already packed in the kayak. Warren and I were
a bit worried about all the stuff in it and suggested putting the outboard in the
boat.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7687.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7687.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Anyway, Dong said not to worry so off we went.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7688.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7688.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Another boat created a large wake, which we carefully negotiated. We were just 
starting to get confident and travelling at about 4 knots.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7690.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7690.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Then the kayak flipped over. We tried to get it upright but it was too heavy to 
do so from the boat. We carefully towed it to the beach, going so slow that at one point Warren asked if we were moving forward. Unfortunately, at some point we lost the outboard.
We took everything out of the kayak and let the water drain away a bit before putting
everything in the boat. The tent took three people to lift.&lt;/p&gt;
&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7692.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7692.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;With nothing in the kayak, we got up to 15 knots 
on a plane when the tow rope snapped. Definitely
a comedy of errors. We decided not to push things any further and limped back at
4 knots.&lt;/p&gt;

&lt;p&gt;When we arrived at the Mooney Mooney boat ramp (which was still closed), marine rescue prevented us from docking as they were towing a broken boat. They took about 20 minutes to do this simple operation and we could easily have gone in and unloaded all our stuff in
parallel.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7693.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7693.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Following the rescue we managed to catch one more bream in the middle of the day before going home. It was quite
an eventful trip and we made some new friends. Dong certainly took his misfortunes with better humour than I would have!&lt;/p&gt;

&lt;p&gt;Postscript. Dong didn’t do badly compared to &lt;a href=&quot;https://www.smh.com.au/national/nsw/hawkesbury-river-boat-explosion-20210404-p57gfv.html&quot;&gt;these people&lt;/a&gt; who had their boat explode at Brooklyn.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7694.jpeg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7694.jpeg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/04/IMG_7723.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/04/IMG_7723.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;</content><author><name>phwl</name></author><category term="fishing" /><category term="australia" /><category term="hawkesbury" /><summary type="html">It started off as a rather routine Easter fishing day trip to Mooney Mooney with Warren.</summary></entry><entry><title type="html">Debian on ARM via QEMU</title><link href="/2021/qemu-armhf-debian/" rel="alternate" type="text/html" title="Debian on ARM via QEMU" /><published>2021-04-01T12:32:43+11:00</published><updated>2021-04-01T12:32:43+11:00</updated><id>/2021/qemu-armhf-debian</id><content type="html" xml:base="/2021/qemu-armhf-debian/">&lt;p&gt;This post describes how to emulate an ARM 64 bit (aarch64) or ARM hard float 32 bit (armhf) processor using using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu&lt;/code&gt; and install Debian Linux on the emulator. Actually I did the 32 bit one first so the process is a little more streamlined for 64 bit.&lt;/p&gt;

&lt;p&gt;I used Ubuntu 18.04.5 but any Debian/Ubuntu distribution can be used with minor changes. Note that this didn’t work under VirtualBox but a USB-bootable Ubuntu distribution should be fine.&lt;/p&gt;

&lt;h1 id=&quot;1-create-qemu-image&quot;&gt;1. Create QEMU Image&lt;/h1&gt;

&lt;h2 id=&quot;11-for-64-bit-aarch64&quot;&gt;1.1. For (64-bit) aarch64&lt;/h2&gt;
&lt;p&gt;I used the lastest version of &lt;a href=&quot;https://github.com/qemu/qemu&quot;&gt;qemu&lt;/a&gt; from github
and created a 32G qcow2 image (there isn’t any disk space advantage to specifying 16G but it is a pain if it runs out).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-system-aarch64 &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
QEMU emulator version 5.2.92 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;v6.0.0-rc2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2003-2021 Fabrice Bellard and the QEMU Project developers
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-img create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; qcow2 debian-3607-aarch64.qcow2 32G 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget http://debian.mirror.digitalpacific.com.au/debian-cd/10.9.0/arm64/iso-cd/debian-10.9.0-arm64-xfce-CD-1.iso
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget http://ftp.au.debian.org/debian/dists/buster/main/installer-arm64/20190702/images/cdrom/initrd.gz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget http://ftp.au.debian.org/debian/dists/buster/main/installer-arm64/20190702/images/cdrom/vmlinuz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-system-aarch64 &lt;span class=&quot;nt&quot;&gt;-M&lt;/span&gt; virt &lt;span class=&quot;nt&quot;&gt;-cpu&lt;/span&gt; cortex-a53 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 1G     &lt;span class=&quot;nt&quot;&gt;-initrd&lt;/span&gt; initrd.img-4.19.0-16-arm64     &lt;span class=&quot;nt&quot;&gt;-kernel&lt;/span&gt; vmlinuz-4.19.0-16-arm64    &lt;span class=&quot;nt&quot;&gt;-append&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root=/dev/sda2 console=ttyAMA0&quot;&lt;/span&gt;     &lt;span class=&quot;nt&quot;&gt;-global&lt;/span&gt; virtio-blk-device.scsi&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;off     &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; virtio-scsi-device,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;scsi     &lt;span class=&quot;nt&quot;&gt;-drive&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;debian-3607-aarch64.qcow2,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rootimg,cache&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;unsafe,if&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;none     &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; scsi-hd,drive&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rootimg  &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; user,hostfwd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;tcp::10022-:22 &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; nic    &lt;span class=&quot;nt&quot;&gt;-nographic&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; intel-hda &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; hda-duplex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;No common CD-ROM drive was detected: Manually select to use /dev/vdb&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;virt-copy-out &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; debian-3607-aarch64.qcow2 /boot/vmlinuz-4.19.0-16-arm64 /boot/initrd.img-4.19.0-16-arm64 &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-system-aarch64 &lt;span class=&quot;nt&quot;&gt;-M&lt;/span&gt; virt &lt;span class=&quot;nt&quot;&gt;-cpu&lt;/span&gt; cortex-a53 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 1G &lt;span class=&quot;nt&quot;&gt;-initrd&lt;/span&gt; initrd.img-4.19.0-16-arm64 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-kernel&lt;/span&gt; vmlinuz-4.19.0-16-arm64 &lt;span class=&quot;nt&quot;&gt;-append&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root=/dev/vda2 console=ttyAMA0&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-drive&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;virtio,file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;debian-3607-aarch64.qcow2,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;qcow2,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;hd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; user,hostfwd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;tcp::10022-:22 &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; nic &lt;span class=&quot;nt&quot;&gt;-nographic&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; intel-hda &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; hda-duplex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then you can login as root and&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# apt update&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# apt &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;12-for-32-bit-armhf&quot;&gt;1.2. For (32-bit) armhf&lt;/h2&gt;

&lt;p&gt;Install qemu.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt upgrade
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;qemu&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;qemu
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;qemu-system-arm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Download &lt;a href=&quot;http://ftp.debian.org/debian/dists/buster/main/installer-armhf/20190702/images/netboot/initrd.gz&quot;&gt;initrd.gz&lt;/a&gt;, &lt;a href=&quot;http://ftp.debian.org/debian/dists/buster/main/installer-armhf/20190702/images/netboot/vmlinuz&quot;&gt;vmlinuz&lt;/a&gt; and
&lt;a href=&quot;http://debian.mirror.digitalpacific.com.au/debian-cd/10.9.0/armhf/iso-cd/debian-10.9.0-armhf-netinst.iso&quot;&gt;debian-10.9.0-armhf-netinst.iso&lt;/a&gt;
(alternatively
&lt;a href=&quot;http://debian.mirror.digitalpacific.com.au/debian-cd/10.9.0/armhf/iso-cd/debian-10.9.0-armhf-xfce-CD-1.iso&quot;&gt;debian-10.9.0-armhf-xfce-CD-1.iso&lt;/a&gt;).&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget http://ftp.debian.org/debian/dists/buster/main/installer-armhf/20190702/images/netboot/initrd.gz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget http://ftp.debian.org/debian/dists/buster/main/installer-armhf/20190702/images/netboot/vmlinuz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget http://debian.mirror.digitalpacific.com.au/debian-cd/10.9.0/armhf/iso-cd/debian-10.9.0-armhf-netinst.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-img create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; qcow2 debian-3607.qcow2 16G &lt;span class=&quot;c&quot;&gt;# 8G will also work but not leave enough disk space for other things&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-system-arm &lt;span class=&quot;nt&quot;&gt;-M&lt;/span&gt; virt &lt;span class=&quot;nt&quot;&gt;-kernel&lt;/span&gt; ./vmlinuz &lt;span class=&quot;nt&quot;&gt;-initrd&lt;/span&gt; ./initrd.gz &lt;span class=&quot;nt&quot;&gt;-hda&lt;/span&gt; debian-3607.qcow2 &lt;span class=&quot;nt&quot;&gt;-nographic&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 1024M &lt;span class=&quot;nt&quot;&gt;-append&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;console=ttyAMA0&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-drive&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;debian-10.9.0-armhf-netinst.iso,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;cdrom,if&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;none,media&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;cdrom &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; virtio-scsi-device &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; scsi-cd,drive&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;cdrom
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use all of the defaults for the Debian installer.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;I used “elec3607” for all user names and passwords.&lt;/li&gt;
  &lt;li&gt;For partitioning select “Guided - use entire disk”. Note that this chooses /dev/vda2 for / (we will use this later).&lt;/li&gt;
  &lt;li&gt;If you get a “Failed to install the base system” message, try a second time from the menu.&lt;/li&gt;
  &lt;li&gt;Select linux-image-armmp-lpae for the kernel.&lt;/li&gt;
  &lt;li&gt;Select targeted for initrd &lt;strong&gt;(This was a mistake, choose generic)&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;For software to install, just choose “SSH server” and “standard system utilities” (the default).&lt;/li&gt;
  &lt;li&gt;You will receive the message that GRUB installation failed. We will fix this later.&lt;/li&gt;
  &lt;li&gt;Exit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu&lt;/code&gt; with “control-A x”.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Extract the kernel and initrd from the disk image.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;libguestfs-tools
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;virt-ls &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; debian-3607.qcow2 /boot/
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;virt-copy-out &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; debian-3607.qcow2 /boot/vmlinuz-4.19.0-16-armmp-lpae /boot/initrd.img-4.19.0-16-armmp-lpae &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can run your Debian-Arm Linux from either Linux:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;qemu-system-arm &lt;span class=&quot;nt&quot;&gt;-M&lt;/span&gt; virt &lt;span class=&quot;nt&quot;&gt;-kernel&lt;/span&gt; vmlinuz-4.19.0-16-armmp-lpae &lt;span class=&quot;nt&quot;&gt;-initrd&lt;/span&gt; initrd.img-4.19.0-16-armmp-lpae &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-append&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;root=/dev/vda2&apos;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-drive&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;virtio,file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;debian-3607-lab4sol.qcow2,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;qcow2,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;hd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-nographic&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; user,hostfwd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;tcp::10022-:22 &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;2-install-sudo-and-put-elec3607-in-the-sudo-group&quot;&gt;2. Install sudo and put ELEC3607 in the sudo group&lt;/h1&gt;
&lt;p&gt;Login as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;elec3607&lt;/code&gt; (password is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;elec3607&lt;/code&gt;) and execute the following commands.
Note that the basic distribution of Debian does not include sudo.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;su -
Password: 
&lt;span class=&quot;c&quot;&gt;# apt install sudo &lt;/span&gt;
Reading package lists... Done
...
usermod &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-G&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;elec3607
shutdown now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also ssh to the machine and use X windows.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh &lt;span class=&quot;nt&quot;&gt;-Y&lt;/span&gt; elec3607@localhost &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 10022
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The complete list of Debian packages is available &lt;a href=&quot;https://www.debian.org/distrib/packages&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</content><author><name>phwl</name></author><category term="academia" /><category term="embedded" /><summary type="html">This post describes how to emulate an ARM 64 bit (aarch64) or ARM hard float 32 bit (armhf) processor using using qemu and install Debian Linux on the emulator. Actually I did the 32 bit one first so the process is a little more streamlined for 64 bit.</summary></entry><entry><title type="html">Trailer Bearings</title><link href="/2021/trailer-bearings/" rel="alternate" type="text/html" title="Trailer Bearings" /><published>2021-03-27T11:19:32+11:00</published><updated>2021-03-27T11:19:32+11:00</updated><id>/2021/trailer-bearings</id><content type="html" xml:base="/2021/trailer-bearings/">&lt;p&gt;Here is how you tell what types of trailer bearings you have without taking them out.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;https://www.mywestshore.com/wp-content/uploads/2018/04/Boat-Trailer-Bearing.jpg&quot;&gt;
  &lt;img src=&quot;https://www.mywestshore.com/wp-content/uploads/2018/04/Boat-Trailer-Bearing.jpg&quot; alt=&quot;&quot; /&gt;
  &lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;A clear explanation is given here &lt;a href=&quot;https://trailersparesdirect.com.au/blogs/technical-info/identifying-hub-types&quot;&gt;https://trailersparesdirect.com.au/blogs/technical-info/identifying-hub-types&lt;/a&gt; and this &lt;a href=&quot;/assets/images/2021/03/bearing_technical_guide.pdf&quot;&gt;pdf&lt;/a&gt; is also helpful.&lt;/p&gt;

&lt;p&gt;In summary, measure from centre of one stud to the next stud:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;64MM = HT HOLDEN&lt;/li&gt;
  &lt;li&gt;68MM = FORD&lt;/li&gt;
  &lt;li&gt;70MM = HQ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Also check the axle:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;39mm Round Axles - 750kg maximum operating weight per Axle. Runs LM (Holden) bearings&lt;/li&gt;
  &lt;li&gt;40mm Square Axles - 1000kg maximum operating weight per Axle. Runs LM (Holden) bearings&lt;/li&gt;
  &lt;li&gt;45mm Square Axles - 1500kg maximum operating weight per Axle. Runs SL (Ford) bearings&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here are the part numbers.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LM (Holden bearings) suit 39mm Round &amp;amp; 40 mm Square Axles - 1000kg weight capacity / pair
· Outer (small) bearings # LM 11949 - Bearing
 # LM 11910 - Cup
· Inner (large) bearings # LM 67048 - Bearing
 # LM 67010 - Cup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SL (Ford bearings) suit 45mm Square Axles - 1400kg weight capacity / pair
· Outer (small) bearings # L 12749 - Bearing
 # L 12710 - Cup
· Inner (large) bearings # L 68149 - Bearing
 # L 68110 - Cup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>phwl</name></author><category term="diy" /><category term="fishing" /><category term="repair" /><summary type="html">Here is how you tell what types of trailer bearings you have without taking them out.</summary></entry><entry><title type="html">Building the Beaglebone kernel</title><link href="/2021/building-bbg-kernel/" rel="alternate" type="text/html" title="Building the Beaglebone kernel" /><published>2021-03-23T20:04:19+11:00</published><updated>2021-03-23T20:04:19+11:00</updated><id>/2021/building-bbg-kernel</id><content type="html" xml:base="/2021/building-bbg-kernel/">&lt;p&gt;This post describes how to cross compile the Beaglebone Black (BBB) or Beaglebone Green (BBG) Linux kernel on an Ubuntu 18.04 Linux machine.&lt;/p&gt;

&lt;h2 id=&quot;1-introduction&quot;&gt;1. Introduction&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Before you proceed, back up your BBB files as we are going to overwrite them!&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Although it is possible to develop directly on a Linux embedded
platform, often the machine speed, disk and memory capacity are insufficient for
doing kernel work. Moreover, not all embedded systems have luxuries
such as Ethernet. For these reasons, the normal practice is to
compile on a more powerful host machine. In the descriptions that following, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$&lt;/code&gt; prompt is from the host machine and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian@beaglebone:~$&lt;/code&gt; prompt is on the BBB.&lt;/p&gt;

&lt;p&gt;The system that I am using is &lt;a href=&quot;https://releases.ubuntu.com/18.04/&quot;&gt;Ubuntu
18.04.5&lt;/a&gt;.  Start by installing this on your real or virtual machine.&lt;/p&gt;

&lt;p&gt;Also, you should update the Debian distribution on your BBB. Download and flash the &lt;a href=&quot;https://beagleboard.org/latest-images&quot;&gt;latest image&lt;/a&gt;. Boot from an SD card with the latest image by pressing the “User Boot” button while applying power.&lt;/p&gt;

&lt;p&gt;Then extend the partition to the same size as the SDcard (the initial partition is 4 GB) by executing.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; /opt/scripts/tools/grow_partition.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and rebooting.&lt;/p&gt;

&lt;h2 id=&quot;2-reflash-the-emmc&quot;&gt;2. Reflash the eMMC&lt;/h2&gt;
&lt;p&gt;If you want to &lt;a href=&quot;https://elinux.org/Beagleboard:BeagleBoneBlack_Debian#Flashing_eMMC&quot;&gt;reflash the eMMC&lt;/a&gt; as well, uncomment the following line in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/uEnv.txt&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cmdline=init=/opt/scripts/tools/eMMC/init-eMMC-flasher-v3.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then reboot again from the SDcard. After a few tens of seconds, you should see a pattern of the blue LEDs turning on in sequence. After tens of minutes, they will all turn off and your eMMC will have the same image as the SDcard.&lt;/p&gt;

&lt;h2 id=&quot;2-cross-compilation&quot;&gt;2. Cross Compilation&lt;/h2&gt;
&lt;p&gt;On the BBB, work out what kernel version is being used:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt;
4.19.94-ti-r42
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now install the cross compiler.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;gcc-arm-linux-gnueabi bison flex libssl-dev lzop u-boot-tools
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Clone the BBB Linux repository and checkout the kernel version you are using. Even if you are planning to upgrade
the kernel, it is a good idea to make sure you can rebuild the original one first.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone git://github.com/beagleboard/linux.git
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout 4.19.94-ti-r42
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This installs installs the initial &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.config&lt;/code&gt; file for the BB kernel and tells the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make&lt;/code&gt; system to use the cross compiler that we installed..&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nv&quot;&gt;ARCH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm &lt;span class=&quot;nv&quot;&gt;CROSS_COMPILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-linux-gnueabi- bb.org_defconfig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can configure the kernel with custom options using the command.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nv&quot;&gt;ARCH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm &lt;span class=&quot;nv&quot;&gt;CROSS_COMPILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-linux-gnueabi- menuconfig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While you are there, select the SiLabs 5351A/B/C driver under “Kernel Configuration &amp;gt; Device Drivers &amp;gt; Common Clock Framework” as illustrated below.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.config - Linux/arm 4.19.94 Kernel Configuration
 &amp;gt; Device Drivers &amp;gt; Common Clock Framework                                     
  ┌─sssssssssssssssssssssss Common Clock Framework ─                        ┐
  │  Arrow keys navigate the menu.  &amp;lt;Enter&amp;gt; selects submenus ---&amp;gt; (or empty │  
  │  submenus ----).  Highlighted letters are hotkeys.  Pressing &amp;lt;Y&amp;gt;        │  
  │  includes, &amp;lt;N&amp;gt; excludes, &amp;lt;M&amp;gt; modularizes features.  Press &amp;lt;Esc&amp;gt;&amp;lt;Esc&amp;gt; to │  
  │  exit, &amp;lt;?&amp;gt; for Help, &amp;lt;/&amp;gt; for Search.  Legend: [*] built-in  [ ]         │  
  │ ┌─                                                                    ┐ │  
  │ │    [ ] PLL Driver for HSDK platform                                 │ │  
  │ │    &amp;lt; &amp;gt; Maxim 9485 Programmable Clock Generator                      │ │  
  │ │    &amp;lt;*&amp;gt; Clock driver for SiLabs 5351A/B/C                            │ │  
  │ │    &amp;lt; &amp;gt; Clock driver for SiLabs 514 devices                          │ │  
  │ │    &amp;lt; &amp;gt; Clock driver for SiLabs 544 devices                          │ │  
  │ │    &amp;lt; &amp;gt; Clock driver for SiLabs 570 and compatible devices           │ │  
  │ │    &amp;lt; &amp;gt; Clock driver for TI CDCE706 clock synthesizer                │ │  
  │ │    &amp;lt; &amp;gt; Clock driver for TI CDCE913/925/937/949 devices              │ │  
  │ │    &amp;lt; &amp;gt; Clock driver for CS2000 Fractional-N Clock Synthesizer &amp;amp; Cloc│ │  
  │ │    [ ] Clock driver for Freescale QorIQ platforms                   │ │  
  │ └─   ┴(+)                                                             ┘ │  
  ├─                                                                        ┤  
  │        &amp;lt;Select&amp;gt;    &amp;lt; Exit &amp;gt;    &amp;lt; Help &amp;gt;    &amp;lt; Save &amp;gt;    &amp;lt; Load &amp;gt;         │  
  └─                                                                        ┘  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After you finish, exit and save your configuation (it is fine not to make changes at this point). You can
see that what it did was to select the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CONFIG_COMMON_CLK_SI5351&lt;/code&gt; option.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;5351 .config
&lt;span class=&quot;nv&quot;&gt;CONFIG_COMMON_CLK_SI5351&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now cross compile the kernel, specifying the loading address (0x80000000) and that we want to make an image suitable for Uboot (uImage) and to buid all the device tree binaries (dtbs),&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nv&quot;&gt;ARCH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm &lt;span class=&quot;nv&quot;&gt;CROSS_COMPILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-linux-gnueabi- &lt;span class=&quot;nv&quot;&gt;LOADADDR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0x80000000 uImage dtbs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now build the kernel modules.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- modules
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then strip and install them all to some temporary directory.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- INSTALL_MOD_STRIP=1 INSTALL_MOD_PATH=/tmp/bbbfs modules_install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;3-testing-the-new-kernel&quot;&gt;3. Testing the new Kernel&lt;/h2&gt;
&lt;p&gt;First copy the kernel and modules to the BBB. You will need SDcard storage to include all the modules that are in Linux.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ scp arch/arm/boot/uImage beaglebone.local:
$ scp -r /tmp/bbbfs beaglebone.local:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then move the files into the correct location as root.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~$ mv ~/bbbfs/lib/modules/4.19.94 /lib/modules
debian@beaglebone:~$ mv ~/zImage /boot/vmlinuz-4.19.94
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Change the kernel that will be used to this one in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/uEnv.txt&lt;/code&gt; by modifying the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uname_r&lt;/code&gt; 
environment variable.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# uname_r=4.19.94-ti-r42
uname_r=4.19.94
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and reboot. We can check the new kernel is being used by the build time.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~$ cat /proc/version
Linux version 4.19.94 (phwl@bream) (gcc version 7.5.0 (Ubuntu/Linaro 7.5.0-3ubuntu1~18.04)) #1 SMP PREEMPT Wed Mar 24 10:25:30 AEDT 2021
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;4-docker-version&quot;&gt;4. Docker version&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/install/ubuntu/&quot;&gt;Install docker&lt;/a&gt;e (if needed).&lt;/p&gt;

&lt;p&gt;```
sudo apt install docker.io
wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.6.15.tar.xz
tar -xf linux-5.6.15.tar.xz
cd linux-5.6.15
docker run –rm dockcross/linux-x64 &amp;gt; ./dockcross
chmod +x dockcross
./dockcross make defconfig
./dockcross make -j 4&lt;/p&gt;</content><author><name>phwl</name></author><category term="academia" /><category term="embedded" /><category term="beaglebone" /><summary type="html">This post describes how to cross compile the Beaglebone Black (BBB) or Beaglebone Green (BBG) Linux kernel on an Ubuntu 18.04 Linux machine.</summary></entry><entry><title type="html">Beaglebone to Si5351 interface via i2c</title><link href="/2021/beaglebone-interface-to-si5351-via-i2c/" rel="alternate" type="text/html" title="Beaglebone to Si5351 interface via i2c" /><published>2021-03-14T12:04:19+11:00</published><updated>2021-03-14T12:04:19+11:00</updated><id>/2021/beaglebone-interface-to-si5351-via-i2c</id><content type="html" xml:base="/2021/beaglebone-interface-to-si5351-via-i2c/">&lt;p&gt;This post describes how to connect the BeagleBone to a Silicon Labs
&lt;a href=&quot;https://www.silabs.com/documents/public/data-sheets/Si5351-B.pdf&quot;&gt;Si5351&lt;/a&gt;
i2c clock generator.&lt;/p&gt;

&lt;h2 id=&quot;1-introduction&quot;&gt;1. Introduction&lt;/h2&gt;
&lt;h3 id=&quot;11-i2c-interface-to-si5351&quot;&gt;1.1 I2C Interface to Si5351&lt;/h3&gt;
&lt;p&gt;The i2c interface is simple, ensure that the SDA and SCL lines of
the Si5351 are connected to an appropriate port on the Beaglebone.
In the example below, I used /dev/i2c-2.&lt;/p&gt;

&lt;p&gt;Then make sure all the software required is installed on the BBG.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;libi2c-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The commands below show all the i2c devices and that the Si5351 
at address 0x60 is responding to the probe on I2C2 (i2c chip 2):&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~$ i2cdetect -l
i2c-1	i2c       	OMAP I2C adapter                	I2C adapter
i2c-2	i2c       	OMAP I2C adapter                	I2C adapter
i2c-0	i2c       	OMAP I2C adapter                	I2C adapter
debian@beaglebone:~$ i2cdetect -y -r 2
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: 60 -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- --                         
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is part of the i2c transaction for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i2cdetect -y -r 2 0x60 0x60&lt;/code&gt;.&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/03/si5351-i2c.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/03/si5351-i2c.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;h3 id=&quot;12-linux-userspace-driver&quot;&gt;1.2. Linux userspace driver&lt;/h3&gt;

&lt;p&gt;There are several ways that this interface can be made. We are going
to create a userspace driver with the Linux  i2c-dev module
(which is the most straightforward approach). 
The following program, derived from the Linux Kernel &lt;a href=&quot;https://www.kernel.org/doc/html/latest/i2c/dev-interface.html&quot;&gt;userspace driver documentation&lt;/a&gt; reads and prints register 0 of device /dev/i2c-2, address 0x60, i.e. register 0 of the Si5351. Note that the reason we need to specify address 0x60 is that there could be multiple devices connected to a single i2c chip.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;fcntl.h&amp;gt;
#include &amp;lt;sys/ioctl.h&amp;gt;
#include &amp;lt;linux/i2c-dev.h&amp;gt;
#include &amp;lt;i2c/smbus.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define	I2C_FNAME	&quot;/dev/i2c-2&quot;
#define	SI5351_ADDR	0x60
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;i2c_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;i2c_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;i2c_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I2C_FNAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;O_RDWR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i2c_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;i2c_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ioctl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i2c_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;I2C_SLAVE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SI5351_ADDR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
		&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

	&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;cm&quot;&gt;/* Using SMBus commands */&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i2c_smbus_read_byte_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i2c_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
		&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; 
		&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;r dev(0x%x) reg(0x%x)=0x%x&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SI5351_ADDR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;i2c_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;i2c_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It can be compiled and executed as follows:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gcc &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; si5351 si5351.c &lt;span class=&quot;nt&quot;&gt;-li2c&lt;/span&gt;
debian@beaglebone:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./si5351 
r dev&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0x60&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; reg&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0x0&lt;span class=&quot;o&quot;&gt;)=&lt;/span&gt;0x11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;13-programming-the-clock-generator&quot;&gt;1.3. Programming the Clock Generator&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&quot;https://www.silabs.com/documents/public/data-sheets/Si5351-B.pdf&quot;&gt;data sheet&lt;/a&gt; for the Si5351 refers to the &lt;a href=&quot;https://www.silabs.com/developers/clockbuilder-pro-software&quot;&gt;Clock builder&lt;/a&gt; software. This is only available for Windows 
but in embedded systems it is a fact of life that if you use operating
system X, there will be a piece of software that is only supported on operating system Y that you need. Here
is a header file that I generated for CLK0 and CLK1 outputs of 28.1544 MHz.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cm&quot;&gt;/*
 * Si5351A Rev B Configuration Register Export Header File
 *
 * This file represents a series of Silicon Labs Si5351A Rev B 
 * register writes that can be performed to load a single configuration 
 * on a device. It was created by a Silicon Labs ClockBuilder Pro
 * export tool.
 *
 * Part:		                                       Si5351A Rev B
 * Design ID:                                          
 * Includes Pre/Post Download Control Register Writes: Yes
 * Created By:                                         ClockBuilder Pro v3.1 [2021-01-18]
 * Timestamp:                                          2021-03-12 15:00:15 GMT-08:00
 *
 * A complete design report corresponding to this export is included at the end 
 * of this header file.
 *
 */&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#ifndef SI5351A_REVB_REG_CONFIG_HEADER
#define SI5351A_REVB_REG_CONFIG_HEADER
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define SI5351A_REVB_REG_CONFIG_NUM_REGS				52
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 16-bit register address */&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 8-bit register data */&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;si5351a_revb_register_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;si5351a_revb_register_t&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;si5351a_revb_registers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SI5351A_REVB_REG_CONFIG_NUM_REGS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x53&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0004&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x20&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0007&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0F&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0011&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0F&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0013&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0014&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0015&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0016&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0017&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x001A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xAF&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x001B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xC8&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x001C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x001D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0E&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x001E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8D&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x001F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0020&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x85&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0021&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x58&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x002A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x002B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x04&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x002C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x002D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0D&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x002E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xE0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x002F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0030&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0031&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0032&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0033&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x04&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0034&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0035&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0D&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xE0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0037&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0038&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0039&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x005A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x005B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0095&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0096&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0097&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0098&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0099&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x009A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x009B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00A2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00A3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00A4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00A5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00A6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00B7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x92&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/*
 * Design Report
 *
 * Overview
 * ========
 * Part:               Si5351A
 * Created By:         ClockBuilder Pro v3.1 [2021-01-18]
 * Timestamp:          2021-03-12 15:00:15 GMT-08:00
 * 
 * Design Notes
 * ============
 * Si5351A 10-pin MSOP
 * 
 * Design Rule Check
 * =================
 * Errors:
 * - No errors
 * 
 * Warnings:
 * - No warnings
 * 
 * Design
 * ======
 * Inputs:
 *     IN0: 27 MHz
 * 
 * Outputs:
 *    OUT0: 28.1544 MHz
 *          Enabled LVCMOS 8 mA
 *          Offset 0.000 s 
 *    OUT1: 28.1544 MHz
 *          Enabled LVCMOS 8 mA
 *          Offset 0.000 s 
 *    OUT2: Unused
 * 
 * Frequency Plan
 * ==============
 * PLL_A:
 *    Enabled Features = None
 *    Fvco             = 893.9022 MHz
 *    M                = 33.1074888888888888... [ 33 + 4837/45000 ]
 *    Input0:
 *       Source           = Crystal
 *       Source Frequency = 27 MHz
 *       Fpfd             = 27 MHz
 *       Load Capacitance = Load_08pF
 *    Output0:
 *       Features       = None
 *       Disabled State = StopLow
 *       R              = 1  (2^0)
 *       Fout           = 28.1544 MHz
 *       N              = 31.75
 *    Output1:
 *       Features       = None
 *       Disabled State = StopLow
 *       R              = 1  (2^0)
 *       Fout           = 28.1544 MHz
 *       N              = 31.75
 * 
 * Settings
 * ========
 * 
 * Location      Setting Name    Decimal Value      Hex Value        
 * ------------  --------------  -----------------  -----------------
 * 0x0002[3]     XO_LOS_MASK     0                  0x0              
 * 0x0002[4]     CLK_LOS_MASK    1                  0x1              
 * 0x0002[5]     LOL_A_MASK      0                  0x0              
 * 0x0002[6]     LOL_B_MASK      1                  0x1              
 * 0x0002[7]     SYS_INIT_MASK   0                  0x0              
 * 0x0003[7:0]   CLK_OEB         0                  0x00             
 * 0x0004[4]     DIS_RESET_LOLA  0                  0x0              
 * 0x0004[5]     DIS_RESET_LOLB  1                  0x1              
 * 0x0007[7:4]   I2C_ADDR_CTRL   0                  0x0              
 * 0x000F[2]     PLLA_SRC        0                  0x0              
 * 0x000F[3]     PLLB_SRC        0                  0x0              
 * 0x000F[4]     PLLA_INSELB     0                  0x0              
 * 0x000F[5]     PLLB_INSELB     0                  0x0              
 * 0x000F[7:6]   CLKIN_DIV       0                  0x0              
 * 0x0010[1:0]   CLK0_IDRV       3                  0x3              
 * 0x0010[3:2]   CLK0_SRC        3                  0x3              
 * 0x0010[4]     CLK0_INV        0                  0x0              
 * 0x0010[5]     MS0_SRC         0                  0x0              
 * 0x0010[6]     MS0_INT         0                  0x0              
 * 0x0010[7]     CLK0_PDN        0                  0x0              
 * 0x0011[1:0]   CLK1_IDRV       3                  0x3              
 * 0x0011[3:2]   CLK1_SRC        3                  0x3              
 * 0x0011[4]     CLK1_INV        0                  0x0              
 * 0x0011[5]     MS1_SRC         0                  0x0              
 * 0x0011[6]     MS1_INT         0                  0x0              
 * 0x0011[7]     CLK1_PDN        0                  0x0              
 * 0x0012[1:0]   CLK2_IDRV       0                  0x0              
 * 0x0012[3:2]   CLK2_SRC        3                  0x3              
 * 0x0012[4]     CLK2_INV        0                  0x0              
 * 0x0012[5]     MS2_SRC         0                  0x0              
 * 0x0012[6]     MS2_INT         0                  0x0              
 * 0x0012[7]     CLK2_PDN        1                  0x1              
 * 0x0013[1:0]   CLK3_IDRV       0                  0x0              
 * 0x0013[3:2]   CLK3_SRC        3                  0x3              
 * 0x0013[4]     CLK3_INV        0                  0x0              
 * 0x0013[5]     MS3_SRC         0                  0x0              
 * 0x0013[6]     MS3_INT         0                  0x0              
 * 0x0013[7]     CLK3_PDN        1                  0x1              
 * 0x0014[1:0]   CLK4_IDRV       0                  0x0              
 * 0x0014[3:2]   CLK4_SRC        3                  0x3              
 * 0x0014[4]     CLK4_INV        0                  0x0              
 * 0x0014[5]     MS4_SRC         0                  0x0              
 * 0x0014[6]     MS4_INT         0                  0x0              
 * 0x0014[7]     CLK4_PDN        1                  0x1              
 * 0x0015[1:0]   CLK5_IDRV       0                  0x0              
 * 0x0015[3:2]   CLK5_SRC        3                  0x3              
 * 0x0015[4]     CLK5_INV        0                  0x0              
 * 0x0015[5]     MS5_SRC         0                  0x0              
 * 0x0015[6]     MS5_INT         0                  0x0              
 * 0x0015[7]     CLK5_PDN        1                  0x1              
 * 0x0016[1:0]   CLK6_IDRV       0                  0x0              
 * 0x0016[3:2]   CLK6_SRC        3                  0x3              
 * 0x0016[4]     CLK6_INV        0                  0x0              
 * 0x0016[5]     MS6_SRC         0                  0x0              
 * 0x0016[6]     FBA_INT         0                  0x0              
 * 0x0016[7]     CLK6_PDN        1                  0x1              
 * 0x0017[1:0]   CLK7_IDRV       0                  0x0              
 * 0x0017[3:2]   CLK7_SRC        3                  0x3              
 * 0x0017[4]     CLK7_INV        0                  0x0              
 * 0x0017[5]     MS7_SRC         0                  0x0              
 * 0x0017[6]     FBB_INT         0                  0x0              
 * 0x0017[7]     CLK7_PDN        1                  0x1              
 * 0x001C[17:0]  MSNA_P1         3725               0x00E8D          
 * 0x001F[19:0]  MSNA_P2         34136              0x08558          
 * 0x001F[23:4]  MSNA_P3         45000              0x0AFC8          
 * 0x002C[17:0]  MS0_P1          3552               0x00DE0          
 * 0x002F[19:0]  MS0_P2          0                  0x00000          
 * 0x002F[23:4]  MS0_P4          4                  0x00004          
 * 0x0034[17:0]  MS1_P1          3552               0x00DE0          
 * 0x0037[19:0]  MS1_P2          0                  0x00000          
 * 0x0037[23:4]  MS1_P4          4                  0x00004          
 * 0x005A[7:0]   MS6_P2          0                  0x00             
 * 0x005B[7:0]   MS7_P2          0                  0x00             
 * 0x0095[14:0]  SSDN_P2         0                  0x0000           
 * 0x0095[7]     SSC_EN          0                  0x0              
 * 0x0097[14:0]  SSDN_P3         0                  0x0000           
 * 0x0097[7]     SSC_MODE        0                  0x0              
 * 0x0099[11:0]  SSDN_P1         0                  0x000            
 * 0x009A[15:4]  SSUDP           0                  0x000            
 * 0x00A2[21:0]  VCXO_PARAM      0                  0x000000         
 * 0x00A5[7:0]   CLK0_PHOFF      0                  0x00             
 * 0x00A6[7:0]   CLK1_PHOFF      0                  0x00             
 * 0x00B7[7:6]   XTAL_CL         2                  0x2
 * 
 *
 */&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Our approach will be to use the header file above as well as the information from &lt;a href=&quot;https://www.silabs.com/documents/public/application-notes/AN619.pdf&quot;&gt;Application Note AN619&lt;/a&gt;. The programming procedure is described in Figure 10 of the &lt;a href=&quot;https://www.silabs.com/documents/public/data-sheets/Si5351-B.pdf&quot;&gt;data sheet&lt;/a&gt;, summarised below.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ClockBuilder Desktop allows a user to generate RAM configuration files to program the Si5351 with custom frequency plans via I2C.  Once the register map has been generated, use the procedure below to program the device.

1. Disable all outputs.
       reg3 = 0xFF
2. Power down all output drivers
       reg 16 = 0x80*
       reg 17 = 0x80*
       reg 18 = 0x80*
       reg 19 = 0x80*
       reg 20 = 0x80*
       reg 21 = 0x80*
       reg 22 = 0x80*
       reg 23 = 0x80*
       * If using the Si5351C with no crystal present on XA/XB, set reg16-23 = 0x84.
3. Set interrupt maks register (see Register 2 description in datasheet)
4. If needed, set crystal load capacitance, XTAL_CL in reg183[7:6].  See datasheet for register description.
5. Write registers 15-92 and 149-170 using the contents of register map generated by ClockBuilder Desktop.
6. Apply PLL A and PLL B soft reset.
       reg177 = 0xAC
7. Enable outputs with OEB control in register 3.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If these steps are followed, the output as specified in the include file
should appear. It doesn’t look much like a square wave on my 150 MHz 
bandwidth oscilloscope. Why?&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/03/si5351-osc.jpg&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/03/si5351-osc.jpg&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;Finally, we wish to have the inphase (I) clock (CLK0) lagging the quadrature (Q) clock (CLK1) by 90 degrees (or 1/4 cycle). We can do this by setting the CLK1_PHOFF register to the appropriate value.&lt;/p&gt;

&lt;h2 id=&quot;2-laboratory-experiment&quot;&gt;2. Laboratory Experiment&lt;/h2&gt;
&lt;p&gt;Update the lab files as below.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;elec3607-labquestions/
debian@beaglebone:~/elec3607-labquestions&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git pull
remote: Enumerating objects: 18, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Counting objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;18/18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Compressing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;12/12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Total 14 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 14 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, pack-reused 0
Unpacking objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;14/14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
From https://github.com/phwl/elec3607-labquestions
   6bf3a34..7c881d4  main       -&amp;gt; origin/main
Updating 6bf3a34..7c881d4
Fast-forward
 .DS_Store                                          | Bin 6148 -&amp;gt; 6148 bytes
 labs/.DS_Store                                     | Bin 0 -&amp;gt; 8196 bytes
 ... - GPIO_ ELEC3607 ELEC9607 Embedded Systems.pdf | Bin 0 -&amp;gt; 297484 bytes
 ...ruction_ ELEC3607 ELEC9607 Embedded Systems.pdf | Bin 0 -&amp;gt; 156733 bytes
 ...nerator_ ELEC3607 ELEC9607 Embedded Systems.pdf | Bin 0 -&amp;gt; 2310302 bytes
 labs/lab3-i2c/Makefile                             |   7 +
 labs/lab3-i2c/Si5351A-RevB-Registers.h             | 240 +++++++++++++++++++++
 labs/lab3-i2c/si5351.c                             |  41 ++++
 8 files changed, 288 insertions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
 create mode 100644 labs/.DS_Store
 create mode 100644 labs/lab1-gpio/Lab 1 - GPIO_ ELEC3607 ELEC9607 Embedded Systems.pdf
 create mode 100644 labs/lab2-sdrconstruction/Lab 2 - SDR Construction_ ELEC3607 ELEC9607 Embedded Systems.pdf
 create mode 100644 labs/lab3-i2c/Lab 3 - Si5351 Clock Generator_ ELEC3607 ELEC9607 Embedded Systems.pdf
 create mode 100644 labs/lab3-i2c/Makefile
 create mode 100755 labs/lab3-i2c/Si5351A-RevB-Registers.h
 create mode 100644 labs/lab3-i2c/si5351.c
debian@beaglebone:~/elec3607-labquestions&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;labs/lab3-i2c/
debian@beaglebone:~/elec3607-labquestions/labs/lab3-i2c&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;part-1---i2c-interface-30&quot;&gt;Part 1 - I2C Interface (30%)&lt;/h3&gt;
&lt;p&gt;Connect up your BBG to the Si5351. Verify that you can obtain
the following output.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~$ i2cdetect -y -r 2
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: 60 -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- --                         
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;part-2---i2c-transaction-30&quot;&gt;Part 2 - I2C Transaction (30%)&lt;/h3&gt;
&lt;p&gt;Use the userspace i2c driver (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;si5351.c&lt;/code&gt;) shown above to read register 0.
Execute the program and capture the activity of the SCL and SDA pins on an oscilloscope. Make a printout of the oscilloscope display and annotate all parts of 
the i2c transaction (start, data, r/w, ack, etc). What is the period of the entire transaction?&lt;/p&gt;

&lt;h3 id=&quot;part-3---si5351-configuration-40&quot;&gt;Part 3 - Si5351 Configuration (40%)&lt;/h3&gt;
&lt;p&gt;Modify the userspace driver for the Si5351 to generate a 7 MHz square wave output on CLK0 and CLK1, with CLK1 being delayed by 90 degrees from CLK0.&lt;/p&gt;</content><author><name>phwl</name></author><category term="academia" /><category term="embedded" /><category term="beaglebone" /><summary type="html">This post describes how to connect the BeagleBone to a Silicon Labs Si5351 i2c clock generator.</summary></entry><entry><title type="html">Connecting the Beaglebone to Internet</title><link href="/2021/connecting-beaglebone-to-internet/" rel="alternate" type="text/html" title="Connecting the Beaglebone to Internet" /><published>2021-03-08T16:14:19+11:00</published><updated>2021-03-08T16:14:19+11:00</updated><id>/2021/connecting-beaglebone-to-internet</id><content type="html" xml:base="/2021/connecting-beaglebone-to-internet/">&lt;p&gt;This post describes how to connect the BeagleBone to the Internet via
Ethernet on Windows and MacOS.&lt;/p&gt;

&lt;p&gt;Drivers to support Internet via USB on the BeagleBone (see &lt;a href=&quot;https://beagleboard.org/getting-started&quot;&gt;Getting
Started&lt;/a&gt;) cannot be installed
on MacOS e.g. Big Sur 11.2.1. Fortunately, the BBG uses standard Linux
networking so this is easy to solve.  In the examples that
follow, the host Mac machine has the prompt “phwl@PHWL-MBP ~ %” and
the BBG prompt is “debian@beaglebone:~$”. The same instructions should 
work for other Beaglebone Boards like the Pocket Beagle or BeagleBone
Black.&lt;/p&gt;

&lt;h1 id=&quot;1-connecting-via-ethernet&quot;&gt;1. Connecting via Ethernet&lt;/h1&gt;
&lt;h2 id=&quot;11a-on-macos&quot;&gt;1.1a. On MacOS&lt;/h2&gt;

&lt;p&gt;Connect your Mac to the BBG using the microUSB. Connect your BBG Ethernet port to a network switch via an Ethernet cable.&lt;/p&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;screen&lt;/code&gt; to login to the BBG from your Mac via
the USB connection (use the one attached to the microUSB connector).&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;phwl@PHWL-MBP ~ % screen /dev/cu.usbmodemBBG2200804786
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;11b-on-windows&quot;&gt;1.1b. On Windows&lt;/h2&gt;
&lt;p&gt;Connect your PC to the BBG using the microUSB. Connect your BBG Ethernet port to a network switch via an Ethernet cable.&lt;/p&gt;

&lt;p&gt;Right click the Windows menu and select “Device Manager”. After the BBG has registered the new USB device, Under “Ports (COM &amp;amp; LPT)” you should see “USB Serial Device (COMx)” where x is a number. In my case it was COM3.&lt;/p&gt;

&lt;p&gt;Download, install and run &lt;a href=&quot;https://www.putty.org/&quot;&gt;Putty&lt;/a&gt;. To login to the BBG from your PC via
the USB connection (use the one attached to the microUSB connector) you select “Serial” as the Connection Type and use your com port (e.g. COM3) as the “Serial line” and click Open.&lt;/p&gt;

&lt;h1 id=&quot;2-connecting-via-wifi&quot;&gt;2. Connecting via Wifi&lt;/h1&gt;
&lt;p&gt;You can also connect the BBG to a Mac and then share its wifi with the BBG.&lt;/p&gt;
&lt;h2 id=&quot;21-macos&quot;&gt;2.1. MacOS&lt;/h2&gt;
&lt;p&gt;Connect your Mac to the BBG using the microUSB. Connect your BBG Ethernet port to the Mac’s Ethernet using an Ethernet cable (you will need an Ethernet adaptor for your Mac).&lt;/p&gt;

&lt;p&gt;In “Control Panel” on your Mac, enable Internet sharing. On my machine the device is called
“Apple USB Ethernet Adaptor” so you have to turn off the “Internet Sharing” service on the left, turn on the “Apple USB Ethernet Adaptor” and then turn on “Internet Sharing” to the the window below:&lt;/p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;a href=&quot;/assets/images/2021/03/internetsharing.png&quot;&gt;
  &lt;img src=&quot;/assets/images/2021/03/internetsharing.png&quot; alt=&quot;&quot; /&gt;
  
    &lt;figcaption&gt;
      

    &lt;/figcaption&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;h2 id=&quot;22-windows-10&quot;&gt;2.2. Windows 10&lt;/h2&gt;
&lt;p&gt;Connect your PC to the BBG using the microUSB. Connect your BBG Ethernet port to the PC’s Ethernet using an Ethernet cable (you may need an Ethernet adaptor for your PC).&lt;/p&gt;

&lt;p&gt;Instructions are &lt;a href=&quot;https://blog.rottenwifi.com/how-to-share-wifi-over-ethernet-on-windows-10/&quot;&gt;here&lt;/a&gt;:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Right Click on the Windows start button, and you will see a menu pop up.&lt;/li&gt;
  &lt;li&gt;From there, you need to click on Network Connections.&lt;/li&gt;
  &lt;li&gt;Once you do so, you will be redirected to the network windows. From there, click on change adapter settings.&lt;/li&gt;
  &lt;li&gt;Now, you will be redirected to the list of all the network connections available online.&lt;/li&gt;
  &lt;li&gt;From there, right-click on your Wi-Fi adapter and then go to properties.&lt;/li&gt;
  &lt;li&gt;Now you need to toggle the option “Allow other network users to connect.”&lt;/li&gt;
  &lt;li&gt;Once done, then you need also to select the Ethernet port through which you want to allow the connection.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Also, make sure that you choose the right ethernet to share the internet. If you do not make the right choice, then your connection sharing will fail. This is specifically true for those who have VPN software installed as it can create virtual ethernet ports and list them there.&lt;/p&gt;

&lt;h1 id=&quot;3-checking-connection&quot;&gt;3. Checking Connection&lt;/h1&gt;
&lt;p&gt;After entering Return, you should see the login prompt.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Debian GNU/Linux 10 beaglebone ttyGS0

BeagleBoard.org Debian Buster IoT TIDL Image 2020-04-06

Support: http://elinux.org/Beagleboard:BeagleBoneBlack_Debian

default username:password is &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;debian:temppwd]

beaglebone login: debian
Password: 
Last login: Fri Feb 26 05:04:59 UTC 2021 on ttyGS0

The programs included with the Debian GNU/Linux system are free software&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
the exact distribution terms &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;each program are described &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;the
individual files &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; /usr/share/doc/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then check if you can ping sydney.edu.au:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~$ ping -c 3 sydney.edu.au
PING sydney.edu.au (129.78.5.8) 56(84) bytes of data.
64 bytes from svdns.sydney.edu.au (129.78.5.8): icmp_seq=1 ttl=242 time=12.1 ms
64 bytes from svdns.sydney.edu.au (129.78.5.8): icmp_seq=2 ttl=242 time=12.4 ms
64 bytes from svdns.sydney.edu.au (129.78.5.8): icmp_seq=3 ttl=242 time=19.8 ms

--- sydney.edu.au ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 6ms
rtt min/avg/max/mdev = 12.144/14.812/19.849/3.566 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can exit the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;screen&lt;/code&gt; program with control-A and then k (if you just disconnect the USB, the /dev/cu.usbmodemBBG2200804786 device will disappear and you will need to reboot the Mac if it is needed again).&lt;/p&gt;

&lt;h2 id=&quot;3-to-login-to-the-bbg-via-ethernet&quot;&gt;3. To Login to the BBG via Ethernet&lt;/h2&gt;
&lt;p&gt;On the BeagleBone type:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;debian@beaglebone:~$ ifconfig
eth0: flags=-28605&amp;lt;UP,BROADCAST,RUNNING,MULTICAST,DYNAMIC&amp;gt;  mtu 1500
        inet 169.254.120.60  netmask 255.255.0.0  broadcast 169.254.255.255
        inet6 fe80::1642:fcff:fe0c:b433  prefixlen 64  scopeid 0x20&amp;lt;link&amp;gt;
        ether 14:42:fc:0c:b4:33  txqueuelen 1000  (Ethernet)
        RX packets 719  bytes 229866 (224.4 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 331  bytes 91879 (89.7 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 45

lo: flags=73&amp;lt;UP,LOOPBACK,RUNNING&amp;gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&amp;lt;host&amp;gt;
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 3968  bytes 266448 (260.2 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 3968  bytes 266448 (260.2 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

usb0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
        inet 192.168.7.2  netmask 255.255.255.0  broadcast 192.168.7.255
        inet6 fe80::1642:fcff:fe0c:b435  prefixlen 64  scopeid 0x20&amp;lt;link&amp;gt;
        ether 14:42:fc:0c:b4:35  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

usb1: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
        inet 192.168.6.2  netmask 255.255.255.0  broadcast 192.168.6.255
        ether 14:42:fc:0c:b4:39  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ifconfig&lt;/code&gt; command shows that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth0&lt;/code&gt; device has the IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;169.254.120.60&lt;/code&gt;. You can use this address directly, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;beaglebone.local&lt;/code&gt; if that is the only device on your local network.&lt;/p&gt;

&lt;p&gt;From another terminal window on your Mac (or any other machine on the same network), you should be able to log into the BBG:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;phwl@PHWL-MBP ~ % ssh debian@169.254.120.60 &lt;span class=&quot;c&quot;&gt;# or ssh debian@beaglebone.local&lt;/span&gt;
The authenticity of host &lt;span class=&quot;s1&quot;&gt;&apos;169.254.120.60 (169.254.120.60)&apos;&lt;/span&gt; can&lt;span class=&quot;s1&quot;&gt;&apos;t be established.
ECDSA key fingerprint is SHA256:6iPvBW868tpt8HVZLemzVVPKAI5n5C669GwfLKiws34.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added &apos;&lt;/span&gt;169.254.120.60&lt;span class=&quot;s1&quot;&gt;&apos; (ECDSA) to the list of known hosts.
Debian GNU/Linux 10

BeagleBoard.org Debian Buster IoT TIDL Image 2020-04-06

Support: http://elinux.org/Beagleboard:BeagleBoneBlack_Debian

default username:password is [debian:temppwd]

debian@169.254.120.60&apos;&lt;/span&gt;s password: 

The programs included with the Debian GNU/Linux system are free software&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
the exact distribution terms &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;each program are described &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;the
individual files &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; /usr/share/doc/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Fri Feb 26 05:05:45 2021
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>phwl</name></author><category term="academia" /><category term="embedded" /><category term="beaglebone" /><summary type="html">This post describes how to connect the BeagleBone to the Internet via Ethernet on Windows and MacOS.</summary></entry></feed>