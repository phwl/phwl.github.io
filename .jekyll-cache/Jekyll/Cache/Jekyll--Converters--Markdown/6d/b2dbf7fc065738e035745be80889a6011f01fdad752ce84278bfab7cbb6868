I"C<p>This post details how to get started with a BeagleBone Green (BBG) microSD card and
program it via GPIO.</p>

<h2 id="1-getting-started">1. Getting Started</h2>
<p>Instructions for getting started with the BBG are available at at 
at <a href="https://beagleboard.org/getting-started">https://beagleboard.org/getting-started</a>. This involves downloading
the Debian Linux image and writing it to a microSD card (make sure you
use the Debian image for the BBG). My version was:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Buster IoT (without graphical desktop) for BeagleBone and PocketBeagle via microSD card
AM3358 Debian 10.3 2020-04-06 4GB SD IoT image for PocketBeagle, BeagleBone, BeagleBone Black, BeagleBone Black Wireless, BeagleBone Black Industrial, BeagleBone Blue, SeeedStudio BeagleBone Green, SeeedStudio BeagleBone Green Wireless, SanCloud BeagleBone Enhanced, Arrow BeagleBone Black Industrial and Mentorel BeagleBone uSomIQ - more info - sha256sum: 22448ba28d0d58e25e875aac3b4e91eaef82e2d11c9d2c43d948ed60708f7434
</code></pre></div></div>

<p>The driver for networking via USB didnâ€™t work with the latest version
of MacOS (Big Sur 11.2.1) but the BBG was able to use DNS over Ethernet
to connect to my network.  One can then <code class="language-plaintext highlighter-rouge">ssh debian@beaglebone.local</code>
to access.</p>

<h2 id="2-gpio">2. GPIO</h2>
<p>As mentioned in my <a href="/2021/QEMU-ARM-Linux-gpio/">earlier post</a>, libgpiod
is the standard way to use GPIO under Linux. To use it on the BBG, one must
first download the library and include files.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>libgpiod-dev
</code></pre></div></div>

<p>You can check everything is working by turning on the D5 LED for 10 seconds 
using</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debian@beaglebone:~$ gpioset -m time -s 10 gpiochip1 24=1
</code></pre></div></div>
<p>and turning it off for 10 seconds</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debian@beaglebone:~$ gpioset -m time -s 10 gpiochip1 24=0
</code></pre></div></div>
<p>Note that after <code class="language-plaintext highlighter-rouge">gpioset</code> exits, the data of the output is undefined.</p>

<h2 id="3-exercise">3. Exercise</h2>
<p>Download, compile and execute the <code class="language-plaintext highlighter-rouge">blink</code> program which
flashes the D5 LED as follows:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>phwl@PHWL-MBP ~ % ssh debian@beaglebone.local
Debian GNU/Linux 10

BeagleBoard.org Debian Buster IoT TIDL Image 2020-04-06

Support: http://elinux.org/Beagleboard:BeagleBoneBlack_Debian

default username:password is <span class="o">[</span>debian:temppwd]

debian@beaglebone.local password: 

The programs included with the Debian GNU/Linux system are free software<span class="p">;</span>
the exact distribution terms <span class="k">for </span>each program are described <span class="k">in </span>the
individual files <span class="k">in</span> /usr/share/doc/<span class="k">*</span>/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Mon Feb 22 08:49:57 2021 from fe80::8b4:5a85:cfb2:5eb%eth0

debian@beaglebone:~<span class="nv">$ </span>git clone https://github.com/phwl/elec3607-materials
Cloning into <span class="s1">'elec3607-materials'</span>...
remote: Enumerating objects: 22, <span class="k">done</span><span class="nb">.</span>
remote: Counting objects: 100% <span class="o">(</span>22/22<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
remote: Compressing objects: 100% <span class="o">(</span>17/17<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
remote: Total 22 <span class="o">(</span>delta 5<span class="o">)</span>, reused 17 <span class="o">(</span>delta 3<span class="o">)</span>, pack-reused 0
Unpacking objects: 100% <span class="o">(</span>22/22<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
debian@beaglebone:~<span class="nv">$ </span><span class="nb">cd </span>elec3607-materials/labs/lab1-gpio/
debian@beaglebone:~/elec3607-materials/labs/lab1-gpio<span class="nv">$ </span>gcc <span class="nt">-o</span> blink blink.c <span class="nt">-lgpiod</span>
debian@beaglebone:~/elec3607-materials/labs/lab1-gpio<span class="nv">$ </span>./blink
</code></pre></div></div>

<p>Modify the program so that, in addition to blinking the LED, it will
print the status of the S2 button every second as
below.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debian@beaglebone:~<span class="nv">$ </span>./blink 
<span class="nv">S2</span><span class="o">=</span>1
...
<span class="nv">S2</span><span class="o">=</span>0
</code></pre></div></div>
:ET