I"Á<p>Here are installation instructions for installing Docker under Windows 10 and MacOS, and running Modelsim for my <a href="https://cusp.sydney.edu.au/students/view-unit-page/alpha/ELEC3608">ELEC3608 Computer Architecture course</a>.</p>

<h1 id="windows-10">Windows 10</h1>

<!-- more -->
<h2 id="update-windows-to-latest-version">Update Windows to latest version</h2>
<ul>
  <li>I am using Windows 10 Version 2004 (OS Build 19041.388)</li>
</ul>

<h2 id="install-xcxsrv">Install XcXsrv</h2>
<ul>
  <li>Install this X windows server <a href="https://sourceforge.net/projects/vcxsrv/">https://sourceforge.net/projects/vcxsrv/</a></li>
  <li>Run XLaunch and configure ‚ÄúMultiple Windows‚Äù and ‚ÄúStart no client‚Äù</li>
  <li>You will get an alert from Windows Defender. Allow access for Private Networks.</li>
</ul>

<h2 id="install-docker">Install Docker</h2>
<ul>
  <li>Use instructions at <a href="https://docs.docker.com/docker-for-windows/install/">https://docs.docker.com/docker-for-windows/install/</a>
to install Stable version of Docker Desktop for Windows (follow them carefully). In the Configuration menu ensure that ‚ÄúEnable WEL 2 Windows Features‚Äù and ‚ÄúAdd shortcut to desktop‚Äù are selected.</li>
  <li>Run Docker Desktop by double-clicking the icon on the desktop</li>
  <li>Open a Windows Powershell window</li>
  <li>Type <code class="language-plaintext highlighter-rouge">docker run hello-world</code> in the command window</li>
</ul>

<h2 id="test-using-x-server">Test using X server</h2>
<ul>
  <li>Type ipconfig (in Powershell window). Note the IPv4 Address for the Ethernet Adapter vEthernet (WSL). On my machine it was 172.18.240.1</li>
  <li>Type <code class="language-plaintext highlighter-rouge">set-variable -name DISPLAY -value 172.18.240.1:0.0</code></li>
  <li>Try running the xeyes program <code class="language-plaintext highlighter-rouge">docker run -it --rm -e DISPLAY=$DISPLAY fr3nd/xeyes</code></li>
  <li>You should now be able to run vsim <code class="language-plaintext highlighter-rouge">docker run -it --rm -e DISPLAY=$DISPLAY -v C:\Ysers\phili:/mnt phwl/elec3608-vsim:latest vsim</code>.</li>
</ul>

<h1 id="macos">MacOS</h1>
<h2 id="install-docker-1">Install Docker</h2>
<ul>
  <li>Download and install stable version from <a href="https://docs.docker.com/docker-for-mac/install/">https://docs.docker.com/docker-for-mac/install/</a></li>
  <li>Then enter the following commands into a bash shell
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>phwl@PHWL-MBP ~ % docker run -it -e DISPLAY=`hostname`:0.0  phwl/elec3608-vsim:latest 
elec3608@ad0a4c9e35e7:~$ export DISPLAY=host.docker.internal:0
elec3608@ad0a4c9e35e7:~$ vsim
** Warning: setting ADDR_NO_RANDOMIZE failed - Success.
Reading pref.tcl
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="if-things-dont-work">If things don‚Äôt work</h2>

<ol>
  <li>Check you have virtualization enabled in your BIOS
    <ul>
      <li>Reboot the computer and open the system‚Äôs BIOS menu. This can usually be done by pressing the delete key, the F1 key or Alt and F4 keys depending on the system.</li>
      <li>Enabling the virtualization extensions in BIOS.  Open the Processor submenu The processor settings menu may be hidden in the Chipset, Advanced CPU Configuration or Northbridge.  Enable Intel Virtualization Technology (also known as Intel VT-x). AMD-V extensions cannot be disabled in the BIOS and should already be enabled. The virtualization extensions may be labeled Virtualization Extensions, Vanderpool or various other names depending on the OEM and system BIOS.  Enable Intel VT-d or AMD IOMMU, if the options are available. Intel VT-d and AMD IOMMU are used for PCI device assignment.</li>
      <li>Select Save &amp; Exit.</li>
    </ul>
  </li>
</ol>

<h2 id="creating-the-docker-image">Creating the Docker image</h2>
<ul>
  <li>The Docker image is based on one kindly provided by Nachiket Kapre (U Waterloo) and available <a href="https://github.com/phwl/elec3608-vsim">here</a>.</li>
</ul>
:ET